<!doctype html>
<html lang="ru">
  <head>
    <style>
      @layer {
        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }

        .slide * {
          all: revert;
        }

        nav * {
          all: revert;
        }
      }

      body {
        font-family: "Helvetica Neue", "Helvetica", "Arial", sans-serif;
        font-size: 20px;
        line-height: 1.5;
      }

      h1 {
        font-size: 2em;
      }

      img {
        max-width: 100%;
      }

      @media print {
        .slide {
          width: 100vw;
          height: 100vh;
          overflow: hidden;
          padding: 0 1em;
        }
        nav {
          width: 100vw;
          min-height: 100vh;
          page-break-after: always;
          padding: 1em;
        }
      }

      @media screen {
        /* pin presentation to full screen */
        body {
          width: 100vw;
          height: 100vh;

          .presentation {
            width: 100%;
            height: 100%;
          }
        }

        .presentation {
          margin: 0 auto;
          display: grid;
          grid-template-rows: repeat(12, 1fr);
          grid-template-columns: repeat(12, 1fr);
        }

        .slides {
          grid-column: 1 / 13;
          grid-row: 1 / 12;
        }

        nav {
          grid-column: 4 / 11;
          grid-row: 12;
        }
        .slides {
          width: 100%;
          display: flex;
          align-items: center;
          flex-flow: row nowrap;
          overflow-x: scroll;
          scroll-snap-type: x mandatory;

            scroll-behavior: smooth;
          /* 
           * unfortunately doesn't work on Chrome 
           *
           */
        }
        
        .slide {
          box-shadow: 1px 1px 10px rgb(0, 0, 0, 0.2);
          scroll-snap-align: center;
          width: 98%;
          height: 100%;
          margin: 0 1%;
          overflow: hidden;
          padding: 1em;
          flex: none;
        }

        /* hide header for list */
        nav h2 {
          display: none;
        }

        /* remove default styling */ 
        nav ol {
          margin: 0;
          padding: 0;
        }

        a {
          text-decoration: none;
        }

        /* hide any text in links */
        nav ol {
          list-style-position: inside;
          li {
            font-size: 0;
            &::marker {
              font-size: initial;
            }
          }
        }
        
        /* make list horizontal */
        nav ol {
          height: 100%;

          /* 5 items in a row */
          display: flex;
          flex-flow: row nowrap;
          a {
            width: 20%;
            flex: none;
          }
          
          /* add scrolling */
          overflow-x: scroll;
          overflow-y: hidden;

          scroll-snap-type: x mandatory;
          scroll-behavior: smooth;
          scrollbar-width: none;

          a {
            scroll-snap-align: center;
          }
        }
        
        /* position number in center */ 
        nav ol a {
          display: flex;
          align-items: center;
          justify-content: center;
        }
        
        /* add animation */
        nav li {
          transition: 0.5s;
        }

        nav a.current li {
          transform: rotate(30deg);
          font-weight: bold;
        }
      }

      #intro {
        padding: 2em;
        @container (orientation: landscape) {
          display: flex;
          align-items: center;
          h1 {
            flex: 1.5;
          }
          gap: 2em;
          figure {
            flex: 1;
          }
          background-color: red;
        }
        
        h1 {
          font-size: 6em;
          text-align: center;
        }
        figure {
          filter: saturate(30%);
        }
         background-image: radial-gradient(#ccc 10%, transparent 10%); 
         background-size: 10px 10px;
        color: #333a48;
      }
    </style>
  </head>
  <body>
    <article class="presentation">
      <nav>
        <h2> Содержание </h2>
        <ol>
        </ol>
      </nav>

      <section class="slides"> 
        <section class="slide" id="intro" data-name="Начало">
          <h1> Проверки </h1>
          <figure>
            <img src="ministry-of-justice-emblem.png">
          </figure>
        </section>
        <section class="slide" id="initial-response">
          <h2> к вам пришли представители госорганов 
               как их встречать? </h2>
          <ul>
            <li>
              обязательная вежливая и внимательная проверка 
              документов и служебных удостоверений, 
              данные которых переписываются.
            </li>
            <li>
              регистрация в вахтовой книге, тетради учета посетителей или аналогичной 
              (не путайте с журналом учета проверок, 
               туда записи вносятся по окончании проверки).
            </li>
            <li>
              доклад руководителю и представителю администрации 
              уполномоченному общаться с проверяющими.
            </li>
          </ul>
        </section>

        <section class="slide">
          <h2>  3 </h2>
        </section>
        <section class="slide">
          <h2>  4 </h2>
        </section>
        <section class="slide">
          <h2>  5 </h2>
        </section>
        <section class="slide">
          <h2>  6 </h2>
        </section>
        <section class="slide">
          <h2>  7 </h2>
        </section>
        <section class="slide">
          <h2>  8 </h2>
        </section>
        <section class="slide">
          <h2>  9 </h2>
        </section>
        <section class="slide">
          <h2>  10 </h2>
        </section>
        <section class="slide">
          <h2>  11 </h2>
        </section>
        <section class="slide">
          <h2>  12 </h2>
        </section>
        <section class="slide">
          <h2>  13 </h2>
        </section>
        <section class="slide">
          <h2>  14 </h2>
        </section>
        <section class="slide">
          <h2>  15 </h2>
        </section>
        <section class="slide">
          <h2>  16 </h2>
        </section>
        <section class="slide">
          <h2>  17 </h2>
        </section>
        <section class="slide">
          <h2>  18 </h2>
        </section>


        <section class="slide">
          <h2>  19 </h2>
        </section>
        <section class="slide">
          <h2>  20 </h2>
        </section>
        <section class="slide">
          <h2>  21 </h2>
        </section>
        <section class="slide">
          <h2>  22 </h2>
        </section>
        <section class="slide">
          <h2>  23 </h2>
        </section>
        <section class="slide">
          <h2>  24 </h2>
        </section>
        <section class="slide">
          <h2>  25 </h2>
        </section>
        <section class="slide">
          <h2>  26 </h2>
        </section>
        <section class="slide">
          <h2>  27 </h2>
        </section>
        <section class="slide">
          <h2>  28 </h2>
        </section>
        <section class="slide">
          <h2>  29 </h2>
        </section>
        <section class="slide">
          <h2>  30 </h2>
        </section>
        <section class="slide">
          <h2>  31 </h2>
        </section>
        <section class="slide">
          <h2>  32 </h2>
        </section>
        <section class="slide">
          <h2>  33 </h2>
        </section>
        <section class="slide">
          <h2>  34 </h2>
        </section>
      </section>

    </article>
  <body>

  <script>
    class Slide {
      constructor(slide, index, id=null, name=null) {
        this.data = slide;
        this.index = index;
        
        this.setName(name);
        this.setId(id);

        const link = document.createElement("a");
        const li = document.createElement("li");
        li.textContent = this.name();
        link.append(li);
        link.setAttribute("href", `#${this.id()}`);
        this.link = link;
      }

      firstHeader() {
        for (const index of [1, 2, 3, 4, 5, 6]) {
          const h = this.data.querySelector(`h${index}`);
          if (h !== null) {
            return h.textContent;
          }
        }
        return null;
      }

      setName(name) {
        return this.data.setAttribute("data-name", 
            name ?? this.data.getAttribute("data-name")
                 ?? this.firstHeader()
                 ?? `slide ${this.index + 1}`
        );
      }

      name() {
        return this.data.getAttribute("data-name")
      }
      
      setId(id) {
        this.data.setAttribute("id",
          id ?? this.data.getAttribute("id")
             ?? `slide-${this.index + 1}`
        );
      }

      id() {
        return this.data.getAttribute("id");
      }

      isSelected() {
        return this.link.classList.contains("current");
      }

      select() {
        this.link.classList.add("current");
      }
      unselect() {
        this.link.classList.remove("current");
      }
    }

    function Slides(presentation) {
      this.presentation = presentation;
      this.navList = this.presentation.querySelector("nav ol");
      this.slideWindow = this.presentation.querySelector(".slides");
      
      // register slides 
      const all = this.slideWindow
                      .querySelectorAll(".slide");
      this.slides = [...all].map(
        (data, index) => new Slide(data, index));

      // activate navigation 
      this.slides.forEach(
        slide => this.navList.append(slide.link));
      this.length = this.slides.length;
      this.actualize();
      
      this.slideWindow.addEventListener(
        "scroll", 
        () => this.actualize()
      );

      const isChromium = !!window.chrome;
      this.slideWindow.addEventListener(
            isChromium? "scrollend" : "scroll", 
            () => this.current.link.scrollIntoView({
              behavior: "auto",
              inline: "center"
            })
      );
    }

    Slides.prototype.actualize = function() {
      const slideWidth = this.slideWindow.scrollWidth / (this.length);
      const index = Math.round(this.slideWindow.scrollLeft / slideWidth);
      
      if (this.current) {
        this.current.unselect();
      }

      this.current = this.slides[index]; 
      this.current.select();
    };

    const slides = new Slides(document.querySelector("article"));
  </script>
</html>
